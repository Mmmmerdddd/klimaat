<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Store - Quality Products & Installation Services</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --text-color: #333;
            --light-bg: #f5f6fa;
            --white: #ffffff;
            --success: #27ae60;
            --warning: #f39c12;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--light-bg);
        }

        /* Header Styles */
        header {
            background-color: var(--primary-color);
            color: var(--white);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
        }

        nav ul {
            list-style: none;
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        nav a {
            color: var(--white);
            text-decoration: none;
            transition: opacity 0.3s;
        }

        nav a:hover {
            opacity: 0.8;
        }

        .nav-icons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .nav-icon {
            cursor: pointer;
            position: relative;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--accent-color);
            color: var(--white);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
        }

        /* Main Content */
        main {
            margin-top: 80px;
            min-height: calc(100vh - 80px);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: var(--white);
            padding: 4rem 2rem;
            text-align: center;
            margin-bottom: 3rem;
            border-radius: 10px;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }

        .btn {
            background-color: var(--accent-color);
            color: var(--white);
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            background-color: #c0392b;
        }

        .btn-secondary {
            background-color: var(--secondary-color);
        }

        .btn-secondary:hover {
            background-color: #2980b9;
        }

        /* Product Grid */
        .section-title {
            font-size: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            color: var(--primary-color);
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .product-card {
            background-color: var(--white);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background-color: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-title {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .product-price {
            font-size: 1.5rem;
            color: var(--accent-color);
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .product-description {
            color: #666;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            overflow-y: auto;
        }

        .modal-content {
            background-color: var(--white);
            margin: 5% auto;
            padding: 2rem;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            position: relative;
        }

        .close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 2rem;
            cursor: pointer;
            color: #999;
        }

        .close:hover {
            color: #333;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--primary-color);
        }

        input[type="text"],
        input[type="email"],
        input[type="password"],
        input[type="number"],
        input[type="date"],
        input[type="color"],
        select,
        textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Cart Styles */
        .cart-items {
            margin-bottom: 2rem;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #eee;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .cart-item-options {
            font-size: 0.9rem;
            color: #666;
        }

        .cart-item-price {
            font-weight: bold;
            color: var(--accent-color);
        }

        .cart-total {
            text-align: right;
            font-size: 1.25rem;
            font-weight: bold;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 2px solid #eee;
        }

        /* Admin Panel Styles */
        .admin-panel {
            background-color: var(--white);
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .admin-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid #eee;
        }

        .admin-tab {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            color: #666;
            transition: color 0.3s;
        }

        .admin-tab.active {
            color: var(--secondary-color);
            border-bottom: 3px solid var(--secondary-color);
            margin-bottom: -2px;
        }

        .admin-content {
            display: none;
        }

        .admin-content.active {
            display: block;
        }

        /* Table Styles */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        th, td {
            text-align: left;
            padding: 1rem;
            border-bottom: 1px solid #eee;
        }

        th {
            background-color: var(--light-bg);
            font-weight: 600;
            color: var(--primary-color);
        }

        /* Orders */
        .order-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-processing {
            background-color: #cfe2ff;
            color: #084298;
        }

        .status-completed {
            background-color: #d1e7dd;
            color: #0f5132;
        }

        /* Dropdown Menu */
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--white);
            min-width: 200px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1;
            border-radius: 5px;
            overflow: hidden;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown-content a {
            color: var(--text-color);
            padding: 0.75rem 1rem;
            display: block;
            transition: background-color 0.3s;
        }

        .dropdown-content a:hover {
            background-color: var(--light-bg);
        }

        /* Responsive */
        @media (max-width: 768px) {
            nav ul {
                flex-direction: column;
                gap: 1rem;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .product-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 1rem;
            }

            .modal-content {
                width: 95%;
                margin: 10% auto;
            }
        }

        /* Loading Spinner */
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--secondary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Messages */
        .message {
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .message-success {
            background-color: #d1e7dd;
            color: #0f5132;
        }

        .message-error {
            background-color: #f8d7da;
            color: #842029;
        }

        .message-info {
            background-color: #cfe2ff;
            color: #084298;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-content">
            <div class="logo" onclick="showHome()">Professional Store</div>
            <nav>
                <ul>
                    <li><a href="#" onclick="showHome()">Home</a></li>
                    <li class="dropdown">
                        <a href="#">Products ▼</a>
                        <div class="dropdown-content" id="categoryMenu">
                            <!-- Categories will be dynamically loaded here -->
                        </div>
                    </li>
                    <li><a href="#" onclick="showOrders()">Track uw bestelling</a></li>
                    <li><a href="#" onclick="showContact()">Contact</a></li>
                </ul>
            </nav>
            <div class="nav-icons">
                <div class="nav-icon" onclick="showCart()">
                    🛒 <span class="cart-count" id="cartCount">0</span>
                </div>
                <div class="nav-icon" onclick="showLogin()">
                    <span id="userDisplay">👤 Login</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="mainContent">
        <!-- Content will be dynamically loaded here -->
    </main>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')">&times;</span>
            <h2>Customer Login</h2>
            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn">Login</button>
                <button type="button" class="btn btn-secondary" onclick="showRegister()">Register</button>
            </form>
            <div style="margin-top: 1rem; font-size: 0.9rem; color: #666;">
                <p>Demo Accounts:</p>
                <p>Customer: customer@demo.com / password123</p>
                <p>Admin: admin@demo.com / admin123</p>
            </div>
        </div>
    </div>

    <!-- Registration Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('registerModal')">&times;</span>
            <h2>Create Account</h2>
            <form id="registerForm" onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label for="registerName">Full Name</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" required>
                </div>
                <div class="form-group">
                    <label for="registerPhone">Phone Number</label>
                    <input type="text" id="registerPhone" required>
                </div>
                <button type="submit" class="btn">Register</button>
                <button type="button" class="btn btn-secondary" onclick="showLogin()">Back to Login</button>
            </form>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('cartModal')">&times;</span>
            <h2>Shopping Cart</h2>
            <div id="cartContent">
                <!-- Cart items will be dynamically loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Initialize application data
        let currentUser = null;
        let cart = [];
        let products = [];
        let categories = [];
        let orders = [];

        // Initialize demo data
        function initializeApp() {
            // Load data from localStorage or set defaults
            const savedProducts = localStorage.getItem('products');
            const savedCategories = localStorage.getItem('categories');
            const savedOrders = localStorage.getItem('orders');
            const savedUsers = localStorage.getItem('users');

            if (!savedCategories) {
                categories = [
                    { id: 1, name: 'Electronics', slug: 'electronics' },
                    { id: 2, name: 'Home Appliances', slug: 'home-appliances' },
                    { id: 3, name: 'Furniture', slug: 'furniture' },
                    { id: 4, name: 'Smart Home', slug: 'smart-home' }
                ];
                localStorage.setItem('categories', JSON.stringify(categories));
            } else {
                categories = JSON.parse(savedCategories);
            }

            if (!savedProducts) {
                products = [
                    {
                        id: 1,
                        name: 'Smart TV 55"',
                        price: 799.99,
                        category: 1,
                        description: 'Ultra HD 4K Smart TV with HDR support',
                        featured: true,
                        installationAvailable: true,
                        installationPrice: 149.99
                    },
                    {
                        id: 2,
                        name: 'Washing Machine',
                        price: 599.99,
                        category: 2,
                        description: 'Energy-efficient front-loading washing machine',
                        featured: true,
                        installationAvailable: true,
                        installationPrice: 89.99
                    },
                    {
                        id: 3,
                        name: 'Office Desk',
                        price: 299.99,
                        category: 3,
                        description: 'Modern ergonomic office desk with cable management',
                        featured: false,
                        installationAvailable: true,
                        installationPrice: 49.99
                    },
                    {
                        id: 4,
                        name: 'Smart Thermostat',
                        price: 249.99,
                        category: 4,
                        description: 'WiFi-enabled smart thermostat with app control',
                        featured: true,
                        installationAvailable: true,
                        installationPrice: 79.99
                    }
                ];
                localStorage.setItem('products', JSON.stringify(products));
            } else {
                products = JSON.parse(savedProducts);
            }

            if (!savedUsers) {
                const users = [
                    {
                        id: 1,
                        name: 'Demo Customer',
                        email: 'customer@demo.com',
                        password: 'password123',
                        phone: '555-0123',
                        role: 'customer'
                    },
                    {
                        id: 2,
                        name: 'Admin User',
                        email: 'admin@demo.com',
                        password: 'admin123',
                        phone: '555-9999',
                        role: 'admin'
                    }
                ];
                localStorage.setItem('users', JSON.stringify(users));
            }

            orders = savedOrders ? JSON.parse(savedOrders) : [];
            
            // Load cart from localStorage
            const savedCart = localStorage.getItem('cart');
            cart = savedCart ? JSON.parse(savedCart) : [];
            
            // Update UI
            updateCartCount();
            loadCategoryMenu();
            showHome();
        }

        // Authentication functions
        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(user));
                closeModal('loginModal');
                updateUserDisplay();
                showMessage('success', `Welcome back, ${user.name}!`);
                
                if (user.role === 'admin') {
                    showAdminPanel();
                } else {
                    showHome();
                }
            } else {
                showMessage('error', 'Invalid email or password');
            }
        }

        function handleRegister(event) {
            event.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const phone = document.getElementById('registerPhone').value;
            
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            
            if (users.find(u => u.email === email)) {
                showMessage('error', 'Email already registered');
                return;
            }
            
            const newUser = {
                id: users.length + 1,
                name,
                email,
                password,
                phone,
                role: 'customer'
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            closeModal('registerModal');
            showMessage('success', 'Account created successfully! Please login.');
            showLogin();
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateUserDisplay();
            showHome();
        }

        function updateUserDisplay() {
            const userDisplay = document.getElementById('userDisplay');
            if (currentUser) {
                userDisplay.innerHTML = `👤 ${currentUser.name} <a href="#" onclick="logout()" style="color: white; margin-left: 10px;">Logout</a>`;
                if (currentUser.role === 'admin') {
                    userDisplay.innerHTML += ` <a href="#" onclick="showAdminPanel()" style="color: white; margin-left: 10px;">Admin</a>`;
                }
            } else {
                userDisplay.innerHTML = '👤 Login';
            }
        }

        // Cart functions
        function addToCart(productId, includeInstallation = false) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const cartItem = {
                ...product,
                includeInstallation,
                quantity: 1
            };
            
            const existingItem = cart.find(item => 
                item.id === productId && item.includeInstallation === includeInstallation
            );
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push(cartItem);
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            showMessage('success', 'Product added to cart!');
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            showCart();
        }

        function updateCartCount() {
            const cartCount = document.getElementById('cartCount');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
        }

        function calculateCartTotal() {
            return cart.reduce((total, item) => {
                const itemPrice = item.price * item.quantity;
                const installationPrice = item.includeInstallation ? 
                    (item.installationPrice * item.quantity) : 0;
                return total + itemPrice + installationPrice;
            }, 0);
        }

        // UI Navigation functions
        function showHome() {
            const mainContent = document.getElementById('mainContent');
            const featuredProducts = products.filter(p => p.featured);
            
            // Get saved layout settings
            const layoutSettings = JSON.parse(localStorage.getItem('layoutSettings') || '{}');
            const heroTitle = layoutSettings.heroTitle || 'Welcome to Professional Store';
            const heroSubtitle = layoutSettings.heroSubtitle || 'Quality products with professional installation services';
            
            mainContent.innerHTML = `
                <div class="hero">
                    <h1>${heroTitle}</h1>
                    <p>${heroSubtitle}</p>
                    <button class="btn" onclick="showAllProducts()">Browse All Products</button>
                </div>
                
                <div class="container">
                    <h2 class="section-title">Featured Products</h2>
                    <div class="product-grid">
                        ${featuredProducts.map(product => createProductCard(product)).join('')}
                    </div>
                </div>
            `;
        }

        function showAllProducts() {
            const mainContent = document.getElementById('mainContent');
            
            mainContent.innerHTML = `
                <div class="container">
                    <h2 class="section-title">All Products</h2>
                    <div class="product-grid">
                        ${products.map(product => createProductCard(product)).join('')}
                    </div>
                </div>
            `;
        }

        function showCategoryProducts(categoryId) {
            const category = categories.find(c => c.id === categoryId);
            const categoryProducts = products.filter(p => p.category === categoryId);
            const mainContent = document.getElementById('mainContent');
            
            mainContent.innerHTML = `
                <div class="container">
                    <h2 class="section-title">${category.name}</h2>
                    <div class="product-grid">
                        ${categoryProducts.map(product => createProductCard(product)).join('')}
                    </div>
                </div>
            `;
        }

        function createProductCard(product) {
            return `
                <div class="product-card">
                    <div class="product-image">Product Image</div>
                    <div class="product-info">
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-price">$${product.price.toFixed(2)}</p>
                        <p class="product-description">${product.description}</p>
                        <button class="btn" onclick="showProductOptions(${product.id})">View Options</button>
                    </div>
                </div>
            `;
        }

        function showProductOptions(productId) {
            const product = products.find(p => p.id === productId);
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>${product.name}</h2>
                    <p>${product.description}</p>
                    <p class="product-price">$${product.price.toFixed(2)}</p>
                    
                    ${product.installationAvailable ? `
                        <div class="form-group">
                            <div class="checkbox-group">
                                <input type="checkbox" id="installation-${product.id}">
                                <label for="installation-${product.id}">
                                    Add professional installation (+$${product.installationPrice.toFixed(2)})
                                </label>
                            </div>
                        </div>
                    ` : ''}
                    
                    <button class="btn" onclick="addToCartWithOptions(${product.id}, this.parentElement.parentElement)">
                        Add to Cart
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function addToCartWithOptions(productId, modal) {
            const includeInstallation = document.getElementById(`installation-${productId}`)?.checked || false;
            addToCart(productId, includeInstallation);
            modal.remove();
        }

        function showCart() {
            const modal = document.getElementById('cartModal');
            const cartContent = document.getElementById('cartContent');
            
            if (cart.length === 0) {
                cartContent.innerHTML = '<p>Your cart is empty</p>';
            } else {
                cartContent.innerHTML = `
                    <div class="cart-items">
                        ${cart.map((item, index) => `
                            <div class="cart-item">
                                <div class="cart-item-info">
                                    <div class="cart-item-title">${item.name}</div>
                                    <div class="cart-item-options">
                                        Quantity: ${item.quantity}
                                        ${item.includeInstallation ? '<br>✓ Installation included' : ''}
                                    </div>
                                </div>
                                <div>
                                    <div class="cart-item-price">
                                        $${((item.price + (item.includeInstallation ? item.installationPrice : 0)) * item.quantity).toFixed(2)}
                                    </div>
                                    <button class="btn" onclick="removeFromCart(${index})">Remove</button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="cart-total">
                        Total: $${calculateCartTotal().toFixed(2)}
                    </div>
                    <button class="btn" onclick="checkout()">Proceed to Checkout</button>
                `;
            }
            
            modal.style.display = 'block';
        }

        function checkout() {
            if (!currentUser) {
                closeModal('cartModal');
                showLogin();
                showMessage('info', 'Please login to complete your order');
                return;
            }
            
            closeModal('cartModal');
            showCheckoutForm();
        }

        function showCheckoutForm() {
            const mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = `
                <div class="container">
                    <h2 class="section-title">Checkout</h2>
                    <div class="admin-panel">
                        <form onsubmit="submitOrder(event)">
                            <div class="form-group">
                                <label for="shippingAddress">Shipping Address</label>
                                <textarea id="shippingAddress" rows="3" required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="installationDate">Preferred Installation Date</label>
                                <input type="date" id="installationDate" min="${new Date().toISOString().split('T')[0]}">
                            </div>
                            
                            <div class="form-group">
                                <label for="specialInstructions">Special Instructions</label>
                                <textarea id="specialInstructions" rows="2"></textarea>
                            </div>
                            
                            <h3>Order Summary</h3>
                            <div class="cart-items">
                                ${cart.map(item => `
                                    <div class="cart-item">
                                        <div class="cart-item-info">
                                            <div class="cart-item-title">${item.name}</div>
                                            <div class="cart-item-options">
                                                Quantity: ${item.quantity}
                                                ${item.includeInstallation ? '<br>✓ Installation included' : ''}
                                            </div>
                                        </div>
                                        <div class="cart-item-price">
                                            $${((item.price + (item.includeInstallation ? item.installationPrice : 0)) * item.quantity).toFixed(2)}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="cart-total">
                                Total: $${calculateCartTotal().toFixed(2)}
                            </div>
                            
                            <button type="submit" class="btn">Place Order</button>
                        </form>
                    </div>
                </div>
            `;
        }

        function submitOrder(event) {
            event.preventDefault();
            
            const order = {
                id: orders.length + 1,
                customerId: currentUser.id,
                customerName: currentUser.name,
                customerEmail: currentUser.email,
                items: [...cart],
                total: calculateCartTotal(),
                shippingAddress: document.getElementById('shippingAddress').value,
                installationDate: document.getElementById('installationDate').value,
                specialInstructions: document.getElementById('specialInstructions').value,
                status: 'pending',
                orderDate: new Date().toISOString(),
                trackingNumber: generateTrackingNumber()
            };
            
            orders.push(order);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Clear cart
            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            
            showMessage('success', `Order placed successfully! Your tracking number is: ${order.trackingNumber}`);
            showOrderConfirmation(order);
        }

        function generateTrackingNumber() {
            return 'TRK-' + Date.now().toString(36).toUpperCase();
        }

        function showOrderConfirmation(order) {
            const mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = `
                <div class="container">
                    <div class="admin-panel">
                        <h2>Order Confirmation</h2>
                        <div class="message message-success">
                            <span>✓</span> Your order has been placed successfully!
                        </div>
                        
                        <h3>Order Details</h3>
                        <p><strong>Order Number:</strong> ${order.id}</p>
                        <p><strong>Tracking Number:</strong> ${order.trackingNumber}</p>
                        <p><strong>Order Date:</strong> ${new Date(order.orderDate).toLocaleDateString()}</p>
                        ${order.installationDate ? `<p><strong>Installation Date:</strong> ${new Date(order.installationDate).toLocaleDateString()}</p>` : ''}
                        <p><strong>Total:</strong> $${order.total.toFixed(2)}</p>
                        
                        <button class="btn" onclick="showOrders()">Track Your Order</button>
                        <button class="btn btn-secondary" onclick="showHome()">Continue Shopping</button>
                    </div>
                </div>
            `;
        }

        function showOrders() {
            if (!currentUser) {
                showLogin();
                showMessage('info', 'Please login to view your orders');
                return;
            }
            
            const userOrders = orders.filter(o => o.customerId === currentUser.id);
            const mainContent = document.getElementById('mainContent');
            
            mainContent.innerHTML = `
                <div class="container">
                    <h2 class="section-title">Mijn Bestellingen</h2>
                    ${userOrders.length === 0 ? 
                        '<p>U heeft nog geen lopende bestellingen.</p>' :
                        `<div class="admin-panel">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Order #</th>
                                        <th>Date</th>
                                        <th>Total</th>
                                        <th>Status</th>
                                        <th>Installation Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${userOrders.map(order => `
                                        <tr>
                                            <td>${order.id}</td>
                                            <td>${new Date(order.orderDate).toLocaleDateString()}</td>
                                            <td>$${order.total.toFixed(2)}</td>
                                            <td><span class="order-status status-${order.status}">${order.status}</span></td>
                                            <td>${order.installationDate ? new Date(order.installationDate).toLocaleDateString() : 'N/A'}</td>
                                            <td>
                                                <button class="btn" onclick="showOrderDetails(${order.id})">View Details</button>
                                            </td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>`
                    }
                </div>
            `;
        }

        function showOrderDetails(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>Order Details #${order.id}</h2>
                    
                    <p><strong>Tracking Number:</strong> ${order.trackingNumber}</p>
                    <p><strong>Order Date:</strong> ${new Date(order.orderDate).toLocaleDateString()}</p>
                    <p><strong>Status:</strong> <span class="order-status status-${order.status}">${order.status}</span></p>
                    ${order.installationDate ? `<p><strong>Installation Date:</strong> ${new Date(order.installationDate).toLocaleDateString()}</p>` : ''}
                    <p><strong>Shipping Address:</strong><br>${order.shippingAddress.replace(/\n/g, '<br>')}</p>
                    ${order.specialInstructions ? `<p><strong>Special Instructions:</strong><br>${order.specialInstructions}</p>` : ''}
                    
                    <h3>Items</h3>
                    <div class="cart-items">
                        ${order.items.map(item => `
                            <div class="cart-item">
                                <div class="cart-item-info">
                                    <div class="cart-item-title">${item.name}</div>
                                    <div class="cart-item-options">
                                        Quantity: ${item.quantity}
                                        ${item.includeInstallation ? '<br>✓ Installation included' : ''}
                                    </div>
                                </div>
                                <div class="cart-item-price">
                                    $${((item.price + (item.includeInstallation ? item.installationPrice : 0)) * item.quantity).toFixed(2)}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="cart-total">
                        Total: $${order.total.toFixed(2)}
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function showContact() {
            const mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = `
                <div class="container">
                    <h2 class="section-title">Contact Us</h2>
                    <div class="admin-panel">
                        <p>We're here to help! Reach out to us through any of the following methods:</p>
                        <br>
                        <p><strong>Phone:</strong> 1-800-PROSTORE (1-800-776-7867)</p>
                        <p><strong>Email:</strong> support@professionalstore.com</p>
                        <p><strong>Hours:</strong> Monday-Friday 9AM-6PM EST</p>
                        <br>
                        <h3>Send us a message</h3>
                        <form onsubmit="sendMessage(event)">
                            <div class="form-group">
                                <label for="contactName">Name</label>
                                <input type="text" id="contactName" required>
                            </div>
                            <div class="form-group">
                                <label for="contactEmail">Email</label>
                                <input type="email" id="contactEmail" required>
                            </div>
                            <div class="form-group">
                                <label for="contactMessage">Message</label>
                                <textarea id="contactMessage" rows="4" required></textarea>
                            </div>
                            <button type="submit" class="btn">Send Message</button>
                        </form>
                    </div>
                </div>
            `;
        }

        function sendMessage(event) {
            event.preventDefault();
            showMessage('success', 'Message sent successfully! We\'ll get back to you within 24 hours.');
            event.target.reset();
        }

        // Admin Panel functions
        function showAdminPanel() {
            if (!currentUser || currentUser.role !== 'admin') {
                showHome();
                return;
            }
            
            const mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = `
                <div class="container">
                    <h2 class="section-title">Admin Panel</h2>
                    <div class="admin-panel">
                        <div class="admin-tabs">
                            <button class="admin-tab active" onclick="showAdminTab('products')">Products</button>
                            <button class="admin-tab" onclick="showAdminTab('categories')">Categories</button>
                            <button class="admin-tab" onclick="showAdminTab('orders')">Orders</button>
                            <button class="admin-tab" onclick="showAdminTab('seo')">SEO Settings</button>
                            <button class="admin-tab" onclick="showAdminTab('layout')">Layout</button>
                        </div>
                        
                        <div id="adminContent">
                            <!-- Admin content will be loaded here -->
                        </div>
                    </div>
                </div>
            `;
            
            showAdminTab('products');
        }

        function showAdminTab(tab) {
            // Update active tab
            document.querySelectorAll('.admin-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const adminContent = document.getElementById('adminContent');
            
            switch(tab) {
                case 'products':
                    showAdminProducts();
                    break;
                case 'categories':
                    showAdminCategories();
                    break;
                case 'orders':
                    showAdminOrders();
                    break;
                case 'seo':
                    showAdminSEO();
                    break;
                case 'layout':
                    showAdminLayout();
                    break;
            }
        }

        function showAdminProducts() {
            const adminContent = document.getElementById('adminContent');
            adminContent.innerHTML = `
                <h3>Product Management</h3>
                <button class="btn" onclick="showAddProductForm()">Add New Product</button>
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Price</th>
                            <th>Featured</th>
                            <th>Installation</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${products.map(product => {
                            const category = categories.find(c => c.id === product.category);
                            return `
                                <tr>
                                    <td>${product.id}</td>
                                    <td>${product.name}</td>
                                    <td>${category ? category.name : 'N/A'}</td>
                                    <td>$${product.price.toFixed(2)}</td>
                                    <td>${product.featured ? '✓' : '✗'}</td>
                                    <td>${product.installationAvailable ? `$${product.installationPrice.toFixed(2)}` : 'N/A'}</td>
                                    <td>
                                        <button onclick="editProduct(${product.id})">Edit</button>
                                        <button onclick="deleteProduct(${product.id})">Delete</button>
                                    </td>
                                </tr>
                            `;
                        }).join('')}
                    </tbody>
                </table>
            `;
        }

        function showAddProductForm() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>Add New Product</h2>
                    <form onsubmit="addProduct(event, this.parentElement.parentElement)">
                        <div class="form-group">
                            <label for="productName">Product Name</label>
                            <input type="text" id="productName" required>
                        </div>
                        <div class="form-group">
                            <label for="productPrice">Price</label>
                            <input type="number" id="productPrice" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="productCategory">Category</label>
                            <select id="productCategory" required>
                                ${categories.map(cat => `<option value="${cat.id}">${cat.name}</option>`).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="productDescription">Description</label>
                            <textarea id="productDescription" rows="3" required></textarea>
                        </div>
                        <div class="form-group">
                            <div class="checkbox-group">
                                <input type="checkbox" id="productFeatured">
                                <label for="productFeatured">Featured Product</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="checkbox-group">
                                <input type="checkbox" id="productInstallation" onchange="toggleInstallationPrice()">
                                <label for="productInstallation">Installation Available</label>
                            </div>
                        </div>
                        <div class="form-group" id="installationPriceGroup" style="display: none;">
                            <label for="installationPrice">Installation Price</label>
                            <input type="number" id="installationPrice" step="0.01">
                        </div>
                        <button type="submit" class="btn">Add Product</button>
                    </form>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function toggleInstallationPrice() {
            const checkbox = document.getElementById('productInstallation');
            const priceGroup = document.getElementById('installationPriceGroup');
            priceGroup.style.display = checkbox.checked ? 'block' : 'none';
        }

        function addProduct(event, modal) {
            event.preventDefault();
            
            const newProduct = {
                id: products.length + 1,
                name: document.getElementById('productName').value,
                price: parseFloat(document.getElementById('productPrice').value),
                category: parseInt(document.getElementById('productCategory').value),
                description: document.getElementById('productDescription').value,
                featured: document.getElementById('productFeatured').checked,
                installationAvailable: document.getElementById('productInstallation').checked,
                installationPrice: document.getElementById('productInstallation').checked ? 
                    parseFloat(document.getElementById('installationPrice').value) : 0
            };
            
            products.push(newProduct);
            localStorage.setItem('products', JSON.stringify(products));
            
            modal.remove();
            showMessage('success', 'Product added successfully!');
            showAdminProducts();
        }

        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>Edit Product</h2>
                    <form onsubmit="updateProduct(event, ${productId}, this.parentElement.parentElement)">
                        <div class="form-group">
                            <label for="editProductName">Product Name</label>
                            <input type="text" id="editProductName" value="${product.name}" required>
                        </div>
                        <div class="form-group">
                            <label for="editProductPrice">Price</label>
                            <input type="number" id="editProductPrice" step="0.01" value="${product.price}" required>
                        </div>
                        <div class="form-group">
                            <label for="editProductCategory">Category</label>
                            <select id="editProductCategory" required>
                                ${categories.map(cat => 
                                    `<option value="${cat.id}" ${cat.id === product.category ? 'selected' : ''}>${cat.name}</option>`
                                ).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editProductDescription">Description</label>
                            <textarea id="editProductDescription" rows="3" required>${product.description}</textarea>
                        </div>
                        <div class="form-group">
                            <div class="checkbox-group">
                                <input type="checkbox" id="editProductFeatured" ${product.featured ? 'checked' : ''}>
                                <label for="editProductFeatured">Featured Product</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="checkbox-group">
                                <input type="checkbox" id="editProductInstallation" ${product.installationAvailable ? 'checked' : ''} onchange="toggleEditInstallationPrice()">
                                <label for="editProductInstallation">Installation Available</label>
                            </div>
                        </div>
                        <div class="form-group" id="editInstallationPriceGroup" style="display: ${product.installationAvailable ? 'block' : 'none'};">
                            <label for="editInstallationPrice">Installation Price</label>
                            <input type="number" id="editInstallationPrice" step="0.01" value="${product.installationPrice || ''}">
                        </div>
                        <button type="submit" class="btn">Update Product</button>
                    </form>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Add the toggle function for edit form
            window.toggleEditInstallationPrice = function() {
                const checkbox = document.getElementById('editProductInstallation');
                const priceGroup = document.getElementById('editInstallationPriceGroup');
                priceGroup.style.display = checkbox.checked ? 'block' : 'none';
            };
        }

        function updateProduct(event, productId, modal) {
            event.preventDefault();
            
            const productIndex = products.findIndex(p => p.id === productId);
            if (productIndex === -1) return;
            
            products[productIndex] = {
                ...products[productIndex],
                name: document.getElementById('editProductName').value,
                price: parseFloat(document.getElementById('editProductPrice').value),
                category: parseInt(document.getElementById('editProductCategory').value),
                description: document.getElementById('editProductDescription').value,
                featured: document.getElementById('editProductFeatured').checked,
                installationAvailable: document.getElementById('editProductInstallation').checked,
                installationPrice: document.getElementById('editProductInstallation').checked ? 
                    parseFloat(document.getElementById('editInstallationPrice').value) : 0
            };
            
            localStorage.setItem('products', JSON.stringify(products));
            
            modal.remove();
            showMessage('success', 'Product updated successfully!');
            showAdminProducts();
        }

        function deleteProduct(productId) {
            if (confirm('Are you sure you want to delete this product?')) {
                products = products.filter(p => p.id !== productId);
                localStorage.setItem('products', JSON.stringify(products));
                showMessage('success', 'Product deleted successfully!');
                showAdminProducts();
            }
        }

        function showAdminCategories() {
            const adminContent = document.getElementById('adminContent');
            adminContent.innerHTML = `
                <h3>Category Management</h3>
                <button class="btn" onclick="showAddCategoryForm()">Add New Category</button>
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Slug</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${categories.map(category => `
                            <tr>
                                <td>${category.id}</td>
                                <td>${category.name}</td>
                                <td>${category.slug}</td>
                                <td>
                                    <button onclick="editCategory(${category.id})">Edit</button>
                                    <button onclick="deleteCategory(${category.id})">Delete</button>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        }

        function showAddCategoryForm() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>Add New Category</h2>
                    <form onsubmit="addCategory(event, this.parentElement.parentElement)">
                        <div class="form-group">
                            <label for="categoryName">Category Name</label>
                            <input type="text" id="categoryName" required>
                        </div>
                        <div class="form-group">
                            <label for="categorySlug">Slug (URL-friendly name)</label>
                            <input type="text" id="categorySlug" required pattern="[a-z0-9-]+">
                        </div>
                        <button type="submit" class="btn">Add Category</button>
                    </form>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function addCategory(event, modal) {
            event.preventDefault();
            
            const newCategory = {
                id: categories.length + 1,
                name: document.getElementById('categoryName').value,
                slug: document.getElementById('categorySlug').value
            };
            
            categories.push(newCategory);
            localStorage.setItem('categories', JSON.stringify(categories));
            loadCategoryMenu();
            
            modal.remove();
            showMessage('success', 'Category added successfully!');
            showAdminCategories();
        }

        function deleteCategory(categoryId) {
            // Check if any products use this category
            const productsInCategory = products.filter(p => p.category === categoryId);
            if (productsInCategory.length > 0) {
                showMessage('error', 'Cannot delete category with existing products');
                return;
            }
            
            if (confirm('Are you sure you want to delete this category?')) {
                categories = categories.filter(c => c.id !== categoryId);
                localStorage.setItem('categories', JSON.stringify(categories));
                loadCategoryMenu();
                showMessage('success', 'Category deleted successfully!');
                showAdminCategories();
            }
        }

        function showAdminOrders() {
            const adminContent = document.getElementById('adminContent');
            adminContent.innerHTML = `
                <h3>Order Management</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Order #</th>
                            <th>Customer</th>
                            <th>Date</th>
                            <th>Total</th>
                            <th>Status</th>
                            <th>Installation</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${orders.map(order => `
                            <tr>
                                <td>${order.id}</td>
                                <td>${order.customerName}<br><small>${order.customerEmail}</small></td>
                                <td>${new Date(order.orderDate).toLocaleDateString()}</td>
                                <td>$${order.total.toFixed(2)}</td>
                                <td>
                                    <select onchange="updateOrderStatus(${order.id}, this.value)">
                                        <option value="pending" ${order.status === 'pending' ? 'selected' : ''}>Pending</option>
                                        <option value="processing" ${order.status === 'processing' ? 'selected' : ''}>Processing</option>
                                        <option value="completed" ${order.status === 'completed' ? 'selected' : ''}>Completed</option>
                                    </select>
                                </td>
                                <td>${order.installationDate ? new Date(order.installationDate).toLocaleDateString() : 'N/A'}</td>
                                <td>
                                    <button onclick="showOrderDetails(${order.id})">View Details</button>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        }

        function updateOrderStatus(orderId, newStatus) {
            const orderIndex = orders.findIndex(o => o.id === orderId);
            if (orderIndex !== -1) {
                orders[orderIndex].status = newStatus;
                localStorage.setItem('orders', JSON.stringify(orders));
                showMessage('success', 'Order status updated!');
            }
        }

        function showAdminSEO() {
            const adminContent = document.getElementById('adminContent');
            const seoSettings = JSON.parse(localStorage.getItem('seoSettings') || '{}');
            
            adminContent.innerHTML = `
                <h3>SEO Settings</h3>
                <form onsubmit="saveSEOSettings(event)">
                    <div class="form-group">
                        <label for="siteTitle">Site Title</label>
                        <input type="text" id="siteTitle" value="${seoSettings.title || 'Professional Store - Quality Products & Installation Services'}" required>
                    </div>
                    <div class="form-group">
                        <label for="siteDescription">Meta Description</label>
                        <textarea id="siteDescription" rows="3" required>${seoSettings.description || 'Shop quality products with professional installation services. Best prices and expert installation available.'}</textarea>
                    </div>
                    <div class="form-group">
                        <label for="siteKeywords">Meta Keywords</label>
                        <input type="text" id="siteKeywords" value="${seoSettings.keywords || 'professional store, installation service, quality products'}" required>
                    </div>
                    <button type="submit" class="btn">Save SEO Settings</button>
                </form>
            `;
        }

        function saveSEOSettings(event) {
            event.preventDefault();
            
            const seoSettings = {
                title: document.getElementById('siteTitle').value,
                description: document.getElementById('siteDescription').value,
                keywords: document.getElementById('siteKeywords').value
            };
            
            localStorage.setItem('seoSettings', JSON.stringify(seoSettings));
            
            // Update page title
            document.title = seoSettings.title;
            
            // Update meta tags
            let metaDescription = document.querySelector('meta[name="description"]');
            if (!metaDescription) {
                metaDescription = document.createElement('meta');
                metaDescription.name = 'description';
                document.head.appendChild(metaDescription);
            }
            metaDescription.content = seoSettings.description;
            
            let metaKeywords = document.querySelector('meta[name="keywords"]');
            if (!metaKeywords) {
                metaKeywords = document.createElement('meta');
                metaKeywords.name = 'keywords';
                document.head.appendChild(metaKeywords);
            }
            metaKeywords.content = seoSettings.keywords;
            
            showMessage('success', 'SEO settings saved successfully!');
        }

        function showAdminLayout() {
            const adminContent = document.getElementById('adminContent');
            const layoutSettings = JSON.parse(localStorage.getItem('layoutSettings') || '{}');
            
            adminContent.innerHTML = `
                <h3>Layout Customization</h3>
                <form onsubmit="saveLayoutSettings(event)">
                    <div class="form-group">
                        <label for="storeName">Store Name (Header)</label>
                        <input type="text" id="storeName" value="${layoutSettings.storeName || 'Professional Store'}" required>
                    </div>
                    <div class="form-group">
                        <label for="primaryColor">Primary Color</label>
                        <input type="color" id="primaryColor" value="${layoutSettings.primaryColor || '#2c3e50'}">
                    </div>
                    <div class="form-group">
                        <label for="secondaryColor">Secondary Color</label>
                        <input type="color" id="secondaryColor" value="${layoutSettings.secondaryColor || '#3498db'}">
                    </div>
                    <div class="form-group">
                        <label for="accentColor">Accent Color</label>
                        <input type="color" id="accentColor" value="${layoutSettings.accentColor || '#e74c3c'}">
                    </div>
                    <div class="form-group">
                        <label for="heroTitle">Hero Title</label>
                        <input type="text" id="heroTitle" value="${layoutSettings.heroTitle || 'Welcome to Professional Store'}" required>
                    </div>
                    <div class="form-group">
                        <label for="heroSubtitle">Hero Subtitle</label>
                        <input type="text" id="heroSubtitle" value="${layoutSettings.heroSubtitle || 'Quality products with professional installation services'}" required>
                    </div>
                    <button type="submit" class="btn">Save Layout Settings</button>
                    <button type="button" class="btn btn-secondary" onclick="resetLayoutSettings()">Reset to Default</button>
                </form>
            `;
        }

        function saveLayoutSettings(event) {
            event.preventDefault();
            
            const layoutSettings = {
                storeName: document.getElementById('storeName').value,
                primaryColor: document.getElementById('primaryColor').value,
                secondaryColor: document.getElementById('secondaryColor').value,
                accentColor: document.getElementById('accentColor').value,
                heroTitle: document.getElementById('heroTitle').value,
                heroSubtitle: document.getElementById('heroSubtitle').value
            };
            
            localStorage.setItem('layoutSettings', JSON.stringify(layoutSettings));
            applyLayoutSettings();
            updateStoreName();
            showMessage('success', 'Layout settings saved successfully!');
            
            // If we're currently on the home page, refresh it to show the new title
            const heroElement = document.querySelector('.hero');
            if (heroElement) {
                showHome();
            }
        }

        function resetLayoutSettings() {
            if (confirm('Are you sure you want to reset to default layout settings?')) {
                localStorage.removeItem('layoutSettings');
                applyLayoutSettings();
                updateStoreName();
                showAdminLayout();
                showMessage('success', 'Layout settings reset to default!');
            }
        }

        function applyLayoutSettings() {
            const layoutSettings = JSON.parse(localStorage.getItem('layoutSettings') || '{}');
            const root = document.documentElement;
            
            if (layoutSettings.primaryColor) {
                root.style.setProperty('--primary-color', layoutSettings.primaryColor);
            }
            if (layoutSettings.secondaryColor) {
                root.style.setProperty('--secondary-color', layoutSettings.secondaryColor);
            }
            if (layoutSettings.accentColor) {
                root.style.setProperty('--accent-color', layoutSettings.accentColor);
            }
        }

        function updateStoreName() {
            const layoutSettings = JSON.parse(localStorage.getItem('layoutSettings') || '{}');
            const storeName = layoutSettings.storeName || 'Professional Store';
            const logo = document.querySelector('.logo');
            if (logo) {
                logo.textContent = storeName;
            }
        }

        // Utility functions
        function showLogin() {
            closeModal('registerModal');
            document.getElementById('loginModal').style.display = 'block';
        }

        function showRegister() {
            closeModal('loginModal');
            document.getElementById('registerModal').style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function showMessage(type, message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message message-${type}`;
            messageDiv.innerHTML = `
                <span>${type === 'success' ? '✓' : type === 'error' ? '✗' : 'ℹ'}</span>
                ${message}
            `;
            
            const container = document.querySelector('.container') || document.querySelector('main');
            container.insertBefore(messageDiv, container.firstChild);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }

        function loadCategoryMenu() {
            const categoryMenu = document.getElementById('categoryMenu');
            categoryMenu.innerHTML = categories.map(category => 
                `<a href="#" onclick="showCategoryProducts(${category.id})">${category.name}</a>`
            ).join('');
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }

        // Initialize the application when page loads
        window.onload = function() {
            // Check for saved user session
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUserDisplay();
            }
            
            // Apply saved layout settings
            applyLayoutSettings();
            updateStoreName();
            
            // Apply saved SEO settings
            const seoSettings = JSON.parse(localStorage.getItem('seoSettings') || '{}');
            if (seoSettings.title) {
                document.title = seoSettings.title;
            }
            
            // Initialize the app
            initializeApp();
        };
    </script>
</body>
</html>
